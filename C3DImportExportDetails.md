# Introduction #

This document explains the different steps realized during C3D importation and exportation into BTK. This importation/exportation is based on the C3D format specifications given by the website http://www.c3d.org.

# C3D importation #

BTK can import C3D files created by PC/VAX/MIPS processor with data stored in float and/or signed/unsigned integer format.<br>
BTK supports C3D files with more than 256 points and 256 analog channels.<br>
<br>
In the order BTK:<br>
<ol><li>extracts events stored in the header section;<br>
</li><li>extracts groups and parameters and stock them as metadata;<br>
</li><li>transform the EVENT group into events;<br>
</li><li>extracts points and analog channels;<br>
</li><li>fills points and analog channels informations from metadata:<br>
<ul><li>points and analog channels labels;<br>
</li><li>points and analog channels descriptions;<br>
</li><li>points' type (marker, force, power, angle, ...);<br>
</li><li>points and analog channels units;<br>
</li><li>analogs offsets and scales (multiplied by the general scaling factor).</li></ul></li></ol>

<h1>C3D Exportation</h1>

As you can import C3D files created by PC/VAX/MIPS processor, you can also export acquisitions into C3D files with the processor type of your choice. For example, you can use BTK on a PC and create a C3D file generated by a machine using a DEC processor.<br>
You have also the choice to store data into integer or float format. The use of the unsigned integer format in C3D files is automatically detected by BTK.<br>
<br>
In the order BTK:<br>
<ol><li>Adapt data if necessary (empty descriptions, frequency null, ...) to be compatible with Vicon products. Without this adaptation, these softwares crash (optional - enabled by default);<br>
</li><li>updates C3D scaling factors from the acquisition's data (optional - enabled by default);<br>
</li><li>updates metadata from the acquisition's data (optional - enabled by default):<br>
<ul><li>POINT group;<br>
</li><li>ANALOG group;<br>
</li><li>EVENT group;<br>
</li><li>EVENT_CONTEXT group;<br>
</li></ul></li><li>updates C3D scaling factors from the acquisition's metada (optional - disabled by default).<br>
</li><li>writes C3D header section;<br>
</li><li>writes C3D parameter section;<br>
</li><li>writes C3D data section.</li></ol>

<b>Note</b>: For more information about the Vicon compatibility, check this wiki <a href='C3DViconCompatibility.md'>page</a>.<br>
<br>
<b>Note</b>: Events stored in the header are transferred into the EVENT group.<br>
<br>
<b>Note</b>: By default, ANALOG:GEN_SCALE is set to 2 due to its mutliplication with individual analog scaling factor during the importation. Disabling step 1 permits to ignore this rule and write the desired value in the ANALOG:GEN_SCALE parameter.